# H4 | Walkthrough-videot

### z) [Kaksi artikkelia läpikävelyistä](https://0xdf.gitlab.io/)

* HTB:Fuse. Valitsin tämän artikkelin sillä siinä hyökätään Windows-maalikoneeseen eikä se ole perinteinen webpalvelin-maalikone.
  * Abusetaan printterin admin-sivua
  * Kerätään käyttäjätietoja spiderilla webbisivulta/linkeistä (CeWL.ruby)
  * Bruteforcetaan tie sisään.
  * Käytetään WinRM:ää kredentiaaleilla ja ladataan hyötykuorma ajurin avulla jotta saadaan root-shell.
  
* HTB:Buff (pwnattu).
  * OSCP-tyylinen boksi, webbisivuna fitness-painotteinen sivu
  * Vanhalla softalla tehty sivu jossa vulni(etäkoodin juoksutus/RCE)
  * Windows Defender blokkaa tiettyjä asioita mutta tietyt toimii
  * Puskurin ylivuoto(PoC)-exploitilla Administrator:iksi, työkaluna msfvenom-payload generaattori
  
  ### z) [Läpikäyntivideot IppSec](https://www.youtube.com/channel/UCa6eh7gCkpPo5XXUDfygQQA)
* HTB:Sauna. Hyökätään aktiivihakemistoon. Valitsin tämän sillä en ole koskaan hyökännyt vastaavanlaiseen ympäristöön.
  * SMB:n tökkimistä CrackMapExec:illä ja SMBMapilla
  * Identifioidaan validit käyttäjät KerBrute:lla
  * Impacket skripteillä AS-REP roastausta > Hyökätään Kerberos:iin > Kräkätään aktiivihakemistoa (AD)
  * Hashcatilla kräkätään saatu hash
  * [Bloodhound:illa](https://github.com/BloodHoundAD/BloodHound) nähdään piilotetut relaatiot AD-ympäristössä
  * Impacket-skriptillä salasanatiivisteiden dumppaus Domain Controllerista. (DSYNC)
  * psexec.py > hashin avulla Adminiksi.
  
* HTB:Remote. Windows-maalikone
  * enumeroidaan ftp:tä ja smb:tä
  * Huom! Windowspalvelimet eivät ole "case-sensitive" eli voit runnata sanalistat pienillä kirjaimilla.
  * NFS:än tökkimistä, löydetään umbraco.sdf joka on tietokanta
  * Adminin salasana löytyy > kirjaudutaan sisään
  * Umbracossa vulni & julkinen exploitti (remote code execution) > reverseshell
  * Löydetään UsoSvc-palvelu > editoidaan sitä suorittamaan reverse shell > saadaan root shell.

  
### a) Uudet työkalut

#### #1 [Nikto - webserver-skanneri](https://github.com/sullo/nikto)

* Nikto skannaa webbipalvelimen etsien haavoittuvuuksia kuten vanhoja versioita & konfigurointiasetuksia.
* Nikto printtaa jotkut haavoittuvuudet "Open Source Vulnerability Database" (OSVDB)-sarjanumeroin, joten niiden tarkempi tutkailu helpottuu.
* Tehokas mutta agressiivinen

![nikto](https://github.com/mikorpi/Pentest-2020-Autumn/blob/main/images/nikto_scan.png)

#### #2 [CeWL - Custom Word List generator](https://github.com/digininja/CeWL/)

* CeWL on rubylla kirjoitettu applikaatio joka crawlaa(spideroi) kohdewebbisivun määriteltyyn syvyyteen asti keräten uniikkeja sanoja, luoden sanalistan.
* Sanalistaa voidaan hyödyntää salasanojen murtamistyökaluilla kuten JohntheRipper:illä (bruteforce)
* HUOM. Tämän kanssa pitää olla tarkkana sillä se saattaa crawlata tiensä sivulta pois jos annat sille tarpeeksi syvyyttä.
* Uniikkeja sanoja sivulta? Eikö tavalliset sanalistat kelpaa? Webbisivu saattaa sisältää esimerkiksi työntekijöiden yms. nimiä jotka voivat olla potentiaalisia käyttäjätunnuksiakin.
* Ei kovin yleinen työkalu?

![cewl](https://github.com/mikorpi/Pentest-2020-Autumn/blob/main/images/cewl_doc.png)

#### #3 [FFUF - WEBFUZZER](https://github.com/ffuf/ffuf)

* Nopea webfuzzaaja kirjoitettu Go:lla
* Fuzzauksen idea on automatisoida satunnainen syöttö applikaatioon/webpalvelimeen etsien implementaatiomokia
* Korvike pythonilla(3) kirjoitetulle [wfuzz:ille](https://github.com/xmendez/wfuzz)

![ffuf](https://github.com/mikorpi/Pentest-2020-Autumn/blob/main/images/ffuf.png)

