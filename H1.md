# Harjoitus 1.
### A) HTB invite code haaste :
HTB on penetraatiotestauksen harjoitteluun tarkoitettu alusta. Sinne pääsy vaatii haasteen suorittamisen. Haaste sinällään ei ole teknisesti vaikea, mutta tavallisille pulliaisille se voi sitä olla. Haasteen ratkaisua ei saa julkaista mutta tietenkin sen löytää googlettamalla.

### B) WebGoat asennettu Kali Linux virtuaalikoneelle.
### C) "Ratkaise WebGoatista tehtävät "HTTP Basics", "Developer tools", "CIA Triad" ja "A1 Injection (intro).""
HTTP Basics : HTTP:n toiminta > Jokainen clientin pyyntö ja palvelimen vastaus sisältää kolme osaa : pyyntö- tai vastausrivi, otsikko sekä "entity bodyn".
Yleisimmät HTTP metodit ovat GET ja POST.
* GET-metodia käytetään datan pyytämiseen tietystä paikasta/resurssista.
* POST-metodi lähettää dataa palvelimelle luodakseen tai päivittääkseen resurssia.
#### HTTP Basics
HTTP Basics ekassa kohdassa sinun tulee lähettää nimi input-kenttään. Network-välilehdeltä voit tarkkailla lähetettyä dataa ja mitä HTTP-metodia se käyttää.
Tässä tapauksessa se on POST, tiedoston nimenä attack1, datana toimii syötetty tieto minkä laitat input-kenttään. Magic number oli 47, löytyi lähdekoodista.
#### Developer Tools
Developer Tools : Kehittäjätyökalujen käyttö. Elementtivälilehti näyttää sinulle sivun HTML ja CSS koodin.
Konsolivälilehti näyttää mitä ladattu JS-tiedosto on voinut printata ulos. Voit myös juoksuttaa omaa JS-koodiasi täällä.
Konsolitehtävässä piti kutsua webgoat:in javascript funktiota webgoat.customjs.phoneHome() ja lähettää saatu koodi input-kenttään.
Source-välilehdellä näet tiedostojärjestelmän ja kaikki sen HTML,CSS ja JS:än mitä verkkosivun luontiin kuuluu.
Verkkovälilehdellä voit tarkastella HTTP-pyyntöjä sekä vastauksia. Verkkovälilehtitehtävässä oli löydettävä tietty HTTP-pyyntö ja napata sen sisällä olevan networkNum-kentän arvo.
#### CIA-triad
CIA-kolmio : Tietoturvamalli joka koostuu luotettavuudesta, eheydestä ja saatavuudesta.
Niitä pidetään tärkeimpinä komponentteina tietoturvassa. CIA-tehtävä oli lyhyt ja helppo quizzi.
#### SQL-Injektio(intro)
SQL-Injektio(intro) : Konsepti käsittää mitä SQL on ja miten sitä voi manipuloida suorittaakseen tehtäviä mitä ei alunperin ollut tarkoitettu suorittaa.
Ekassa tehtävässä piti hakea Bobin osasto. ``(SELECT department FROM employees where first_name='Bob' AND last_name='Franco';)``
DML eli datamanipulaatiokieli manipuloi dataa ja sisältää yleisimpiä SQL-lauseita (eg. SELECT,INSERT,UPDATE) DML-komentoja käytetään datan varastointiin, hakemiseen, muokkaamiseen ja poistamiseen.
DML-tehtävässä piti vaihtaa Tobin osasto Salesiin. ``UPDATE employees SET department='Sales' WHERE last_name='Barnett' AND first_name='Tobi';``
DDL eli datan määritelmäkieli sisältää komentoja tietorakenteen määrittelyyn(db schema).
DDL-komentoja käytetään tietokannan objektien muuttamiseen,luontiin ja "tiputtamiseen"(poistamiseen).
DDL-tehtävässä piti muokata schemeä addaamalla kolumni tableen. ``ALTER TABLE employees ADD phone varchar(20);``
DCL eli datan kontrollikieli. Niitä käytetään oikeuksien jakoon ja luontiin. DCL-tehtävä ``GRANT ALTER TABLE TO UnauthorizedUser;``
#### Injektioita
Sitten päästään varsinaiseen asiaan. SQL-injektiot. Hyvin yleinen webhakkerointitekniikka. Siinä injektoidaan haitallista koodia SQL-kyselyyn inputkentän kautta.
SQL-injektiotehtävä9: ``SELECT * FROM user_data WHERE first_name = 'John' and last_name = '' or '1' = '1'``
Injektio toimii koska '1'='1 kääntyy True:ksi, eli pitää paikkansa.

Tehtävä10 : ``SELECT * From user_data WHERE Login_Count = 10 and userid= 10 or 1=1``
 Injektio toimii koska 1=1 == True.
 Tehtävä11: Piti syöttää input-kenttään nimi ja autentikaatio TAN. Ratkaisu toimi niin että syötät nimikenttään '' ja TAN-kenttään '' OR '1'='1 mikä kääntyy todeksi.
 Tehtävä12, Query Chaining. Vaikein tähän mennessä. Vastaukseksi muodostui ``'; UPDATE employees SET salary = 500000 where last_name='Smith' --``
 Kaksi väliviivaa SQL:ssä tarkoittaa kommentin merkintää, tietokanta jättää huomioimatta kaiken mitä sen jälkeen kysellään.
 Tehtävä13, lokien poisto eli jälkien peittely. Edellisen tehtävän jäljiltä tämä oli hyvin helppo. Vastaus oli : ``'; DROP TABLE access_log--``

## Lähteet
* [Penetration Testing Course 2020 Autumn - Tunkeutumistestaus ict4tn027-3006 by Tero Karvinen](http://terokarvinen.com/2020/tunkeutumistestaus-kurssi-pentest-course-ict4tn027-3006-autumn-2020/#h1-kutsu-vuohi-ja-pimean-verkon-paivakirjat)
* [SQL-injektio ja kyselyiden chainaus](https://stackoverflow.com/questions/2140244/sql-injection-and-two-queries)
* [OWASP WebGoat](https://owasp.org/www-project-webgoat/)
* [Github OWASP WebGoat](https://github.com/WebGoat/WebGoat/issues)
* 
